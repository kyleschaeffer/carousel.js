/*! carousel.js v1.0 | MIT License | https://github.com/oldrivercreative/carousel */
!function(o){o.fn.carousel=function(a){var e=o.extend({},{paging:!1,navigation:!1,movethreshold:10,swipethreshold:10,oninit:!1,onupdate:!1,destroy:!1},a);return window.optimusPrime=!1,("WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"transform"in document.body.style)&&(window.optimusPrime=!0),this.each(function(){var a=o(this),t=a.find("ul:eq(0)");e.destroy?a.trigger("carousel-destroy"):(a.on("carousel-init",function(){if(a.data("carousel-position",0),a.data("carousel-touch-change",0),a.data("carousel-item-count",t.children().size()),o(a).addClass("ui-carousel"),o(t).addClass("ui-carousel-shaker"),e.paging){var s=o('<button class="previous"><span class="icon-arrow-left5"></span></button>');s.on("click",function(o){o.preventDefault(),a.trigger("carousel-retreat")}),a.append(s);var i=o('<button class="next"><span class="icon-arrow-right5"></span></button>');i.on("click",function(o){o.preventDefault(),a.trigger("carousel-advance")}),a.append(i)}if(e.navigation){for(var r=o('<ul class="ui-carousel-nav"/>'),n=0;n<a.data("carousel-item-count");n++){var u=o("<button><span>"+(n+1)+"</span></button>");u.data("carousel-item",n),u.on("click",function(e){e.preventDefault();var s=o(this).data("carousel-item"),i=t.children("li:eq(0)").width()/t.width()*100;s=s*i*-1,a.data("carousel-position",s),a.trigger("carousel-contain"),a.trigger("carousel-slide")});var c=o("<li/>");c.append(u),0==n&&c.addClass("ui-active"),r.append(c)}a.append(r)}e.oninit&&e.oninit()}),a.on("carousel-touch-down",function(e,t){a.addClass("ui-touch-threshold"),a.data("carousel-touch-start",{x:t.x,y:o(window).scrollTop()})}),a.on("carousel-touch-move",function(s,i){if(a.hasClass("ui-touch-threshold")){var r=a.data("carousel-touch-start");Math.abs(o(window).scrollTop()-r.y)>=e.movethreshold?a.removeClass("ui-touch-threshold"):Math.abs(i.x-r.x)>=e.movethreshold&&(a.removeClass("ui-touch-threshold").addClass("ui-touch-swiping"),o("body").addClass("ui-swiping"))}if(a.hasClass("ui-touch-swiping")){var r=a.data("carousel-touch-start"),n=i.x-r.x,i=a.data("carousel-position"),u=n/t.width()*100;a.data("carousel-touch-change",u);var c=i+u;window.optimusPrime?t.css({WebkitTransform:"translateX("+c+"%)",MozTransform:"translateX("+c+"%)",transform:"translateX("+c+"%)"}):t.css("left",c+"%"),e.onupdate&&e.onupdate(c)}}),a.on("carousel-touch-up",function(){if(a.hasClass("ui-touch-threshold"))a.removeClass("ui-touch-threshold");else if(a.hasClass("ui-touch-swiping")){a.removeClass("ui-touch-swiping"),o("body").removeClass("ui-swiping");var s=a.data("carousel-position"),i=a.data("carousel-touch-change");if(i>=e.swipethreshold){var r=t.children("li:eq(0)").width()/t.width()*100;i=r}else if(i<=-1*e.swipethreshold){var r=t.children("li:eq(0)").width()/t.width()*100;i=-1*r}a.data("carousel-position",s+i),a.trigger("carousel-contain"),a.trigger("carousel-slide")}}),a.on("carousel-advance",function(){var o=a.data("carousel-position"),e=t.children("li:eq(0)").width()/t.width()*100;o-=e,a.data("carousel-position",o),a.trigger("carousel-contain"),a.trigger("carousel-slide")}),a.on("carousel-retreat",function(){var o=a.data("carousel-position"),e=t.children("li:eq(0)").width()/t.width()*100;o+=e,a.data("carousel-position",o),a.trigger("carousel-contain"),a.trigger("carousel-slide")}),a.on("carousel-contain",function(){var o=t.children("li:eq(0)").width()/t.width()*100,s=Math.round(100/o),i=a.data("carousel-item-count"),r=a.data("carousel-position");if(r=Math.round(r/o)*o,r>0?r=0:o*(i-s)*-1>r&&(r=o*(i-s)*-1),a.data("carousel-position",r),e.navigation){var n=Math.round(Math.abs(r)/o),u=a.children("ul.ui-carousel-nav");u.children().removeClass("ui-active"),u.children().eq(n).addClass("ui-active")}}),a.on("carousel-slide",function(){var o=a.data("carousel-position");window.optimusPrime?t.css({WebkitTransform:"translateX("+o+"%)",MozTransform:"translateX("+o+"%)",transform:"translateX("+o+"%)"}):t.animate({left:o+"%"},300),e.onupdate&&e.onupdate(o)}),a.on("carousel-destroy",function(){a.removeData("carousel-position"),a.removeData("carousel-item-count"),a.off("carousel-init carousel-advance carousel-retreat carousel-slide"),a.children("button.previous,button.next").remove(),a.removeClass("ui-carousel"),t.removeClass("ui-carousel-shaker"),window.optimusPrime?t.css({WebkitTransform:"translateX(0%)",MozTransform:"translateX(0%)",transform:"translateX(0%)"}):t.css("left","0%"),0==o(".ui-carousel").size()&&(o(window).off("resize"),o(document).off("mousedown touchstart mousemove touchmove mouseup touchend touchleave touchcancel"),o("body").removeClass("ui-draggables-listen"))}),a.trigger("carousel-init"))}),o("body").hasClass("ui-draggables-listen")||(o("body").addClass("ui-draggables-listen"),o(window).on("resize",function(){o(".ui-carousel").trigger("carousel-slide")}),o(document).on("mousedown touchstart",function(a){if((a.pageX||a.originalEvent.touches)&&o(a.target).is(".ui-carousel,.ui-carousel *:not(.slider-handle,.slider-handle *)")&&3!=a.which){var e=o(a.target).closest(".ui-carousel");o(e).trigger("carousel-touch-down",[{x:a.pageX?a.pageX:a.originalEvent.touches[0].pageX,y:a.pageY?a.pageY:a.originalEvent.touches[0].pageY}]),navigator.userAgent.match(/Android/i)}}),o(document).on("mousemove touchmove",function(a){(a.pageX||a.originalEvent.touches)&&(o("body").hasClass("ui-swiping")&&a.preventDefault(),o(".ui-carousel.ui-touch-threshold,.ui-carousel.ui-touch-swiping").each(function(){o(this).trigger("carousel-touch-move",[{x:a.pageX?a.pageX:a.originalEvent.touches[0].pageX,y:a.pageY?a.pageY:a.originalEvent.touches[0].pageY}])}))}),o(document).on("mouseup touchend touchleave touchcancel",function(){o(".ui-carousel.ui-touch-threshold,.ui-carousel.ui-touch-swiping").each(function(){o(this).trigger("carousel-touch-up")})})),this}}(jQuery);