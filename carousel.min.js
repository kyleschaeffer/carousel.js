/*! carousel.js v1.0 | MIT License | https://github.com/oldrivercreative/carousel */
!function(e){e.fn.carousel=function(o){var a=e.extend({},{paging:!1,navigation:!1,loop:!1,autoplay:!1,delay:12e3,buttons:{previous:"Previous",next:"Next",navigation:"%i"},movethreshold:10,swipethreshold:10,oninit:!1,onupdate:!1,destroy:!1},o),t=!1;return window.optimusPrime=!1,("WebkitTransform"in document.body.style||"MozTransform"in document.body.style||"transform"in document.body.style)&&(window.optimusPrime=!0),this.each(function(){var o=e(this),i=o.find("ul:eq(0)");a.destroy?o.trigger("carousel-destroy"):(o.on("carousel-init",function(){if(o.data("carousel-position",0),o.data("carousel-touch-change",0),o.data("carousel-last-touch",!1),o.data("carousel-item-count",i.children().size()),o.addClass("ui-carousel"),i.addClass("ui-carousel-shaker"),a.paging){var t=e('<button class="previous"><span>'+a.buttons.previous+"</span></button>");t.on("click",function(e){e.preventDefault(),o.data("carousel-last-touch",!1),o.trigger("carousel-retreat")}),o.append(t);var s=e('<button class="next"><span>'+a.buttons.next+"</span></button>");s.on("click",function(e){e.preventDefault(),o.data("carousel-last-touch",!1),o.trigger("carousel-advance")}),o.append(s)}if(a.navigation){for(var r=e('<ul class="ui-carousel-nav"/>'),u=0;u<o.data("carousel-item-count");u++){var n=a.buttons.navigation.replace("%i",u+1),l=e("<button><span>"+n+"</span></button>");l.data("carousel-item",u),l.on("click",function(a){a.preventDefault();var t=e(this).data("carousel-item"),s=i.children("li:eq(0)").width()/i.width()*100;t=t*s*-1,o.data("carousel-position",t),o.data("carousel-last-touch",!1),o.trigger("carousel-contain"),o.trigger("carousel-slide")});var c=e("<li/>");c.append(l),0==u&&c.addClass("ui-active"),r.append(c)}o.append(r)}o.trigger("carousel-contain"),a.autoplay&&o.trigger("carousel-queue"),"function"==typeof a.oninit&&a.oninit()}),o.on("carousel-touch-down",function(t,i){o.addClass("ui-touch-threshold"),o.data("carousel-touch-start",{x:i.x,y:e(window).scrollTop()}),a.autoplay&&o.trigger("carousel-dequeue")}),o.on("carousel-touch-move",function(t,s){if(o.hasClass("ui-touch-threshold")){var r=o.data("carousel-touch-start");Math.abs(e(window).scrollTop()-r.y)>=a.movethreshold?o.removeClass("ui-touch-threshold"):Math.abs(s.x-r.x)>=a.movethreshold&&(o.removeClass("ui-touch-threshold").addClass("ui-touch-swiping"),e("body").addClass("ui-swiping"))}if(o.hasClass("ui-touch-swiping")){var r=o.data("carousel-touch-start"),u=s.x-r.x,s=o.data("carousel-position"),n=u/i.width()*100;o.data("carousel-touch-change",n);var l=s+n;window.optimusPrime?i.css({WebkitTransform:"translateX("+l+"%)",MozTransform:"translateX("+l+"%)",transform:"translateX("+l+"%)"}):i.css("left",l+"%"),"function"==typeof a.onupdate&&a.onupdate(l)}}),o.on("carousel-touch-up",function(){if(o.hasClass("ui-touch-threshold"))o.removeClass("ui-touch-threshold");else if(o.hasClass("ui-touch-swiping")){o.removeClass("ui-touch-swiping"),e("body").removeClass("ui-swiping");var t=o.data("carousel-position"),s=o.data("carousel-touch-change");if(s>=a.swipethreshold){var r=i.children("li:eq(0)").width()/i.width()*100;r>=s&&(s=r)}else if(s<=-1*a.swipethreshold){var r=i.children("li:eq(0)").width()/i.width()*100;s>=-1*r&&(s=-1*r)}o.data("carousel-last-touch",!0),o.data("carousel-position",t+s),o.trigger("carousel-contain"),o.trigger("carousel-slide")}a.autoplay&&o.trigger("carousel-queue")}),o.on("carousel-queue",function(){t=setTimeout(function(){o.trigger("carousel-advance")},a.delay)}),o.on("carousel-dequeue",function(){clearTimeout(t)}),o.on("carousel-advance",function(){var e=o.data("carousel-position"),t=i.children("li:eq(0)").width()/i.width()*100;e-=t,o.data("carousel-position",e),o.trigger("carousel-contain"),o.trigger("carousel-slide"),a.autoplay&&(o.trigger("carousel-dequeue"),o.trigger("carousel-queue"))}),o.on("carousel-retreat",function(){var e=o.data("carousel-position"),t=i.children("li:eq(0)").width()/i.width()*100;e+=t,o.data("carousel-position",e),o.trigger("carousel-contain"),o.trigger("carousel-slide"),a.autoplay&&(o.trigger("carousel-dequeue"),o.trigger("carousel-queue"))}),o.on("carousel-contain",function(){var e=i.children("li:eq(0)").width()/i.width()*100,t=Math.round(100/e),s=o.data("carousel-item-count"),r=o.data("carousel-position");if(r=Math.round(r/e)*e,r>0?r=a.loop&&!o.data("carousel-last-touch")?e*(s-t)*-1:0:e*(s-t)*-1>r&&(r=a.loop&&!o.data("carousel-last-touch")?0:e*(s-t)*-1),!a.loop&&a.paging&&r>=0?o.children("button.previous").prop("disabled",!0):!a.loop&&a.paging&&o.children("button.previous[disabled]").prop("disabled",!1),!a.loop&&a.paging&&e*(s-t)*-1>=r?o.children("button.next").prop("disabled",!0):!a.loop&&a.paging&&o.children("button.next[disabled]").prop("disabled",!1),o.data("carousel-position",r),a.navigation){var u=Math.round(Math.abs(r)/e),n=o.children("ul.ui-carousel-nav");n.children().removeClass("ui-active"),n.children().eq(u).addClass("ui-active")}}),o.on("carousel-slide",function(){var e=o.data("carousel-position");window.optimusPrime?i.css({WebkitTransform:"translateX("+e+"%)",MozTransform:"translateX("+e+"%)",transform:"translateX("+e+"%)"}):i.animate({left:e+"%"},300),a.onupdate&&a.onupdate(e)}),o.on("carousel-destroy",function(){o.removeData("carousel-position"),o.removeData("carousel-item-count"),o.off("carousel-init carousel-advance carousel-retreat carousel-slide"),o.children("button.previous,button.next").remove(),o.removeClass("ui-carousel"),i.removeClass("ui-carousel-shaker"),window.optimusPrime?i.css({WebkitTransform:"translateX(0%)",MozTransform:"translateX(0%)",transform:"translateX(0%)"}):i.css("left","0%"),0==e(".ui-carousel").size()&&(e(window).off("resize"),e(document).off("mousedown touchstart mousemove touchmove mouseup touchend touchleave touchcancel"),e("body").removeClass("ui-draggables-listen"))}),o.trigger("carousel-init"))}),e("body").hasClass("ui-draggables-listen")||(e("body").addClass("ui-draggables-listen"),e(window).on("resize orientationchange",function(){e(".ui-carousel").trigger("carousel-slide"),e(".ui-carousel").trigger("carousel-contain")}),e(document).on("mousedown touchstart",function(o){if((o.pageX||o.originalEvent.touches)&&e(o.target).is(".ui-carousel,.ui-carousel *:not(.slider-handle,.slider-handle *)")&&3!=o.which){var a=e(o.target).closest(".ui-carousel");e(a).trigger("carousel-touch-down",[{x:o.pageX?o.pageX:o.originalEvent.touches[0].pageX,y:o.pageY?o.pageY:o.originalEvent.touches[0].pageY}]),navigator.userAgent.match(/Android/i)}}),e(document).on("mousemove touchmove",function(o){(o.pageX||o.originalEvent.touches)&&(e("body").hasClass("ui-swiping")&&o.preventDefault(),e(".ui-carousel.ui-touch-threshold,.ui-carousel.ui-touch-swiping").each(function(){e(this).trigger("carousel-touch-move",[{x:o.pageX?o.pageX:o.originalEvent.touches[0].pageX,y:o.pageY?o.pageY:o.originalEvent.touches[0].pageY}])}))}),e(document).on("mouseup touchend touchleave touchcancel",function(){e(".ui-carousel.ui-touch-threshold,.ui-carousel.ui-touch-swiping").each(function(){e(this).trigger("carousel-touch-up")})})),this}}(jQuery);